{
    "version": 2,
    "name": "UMU API Gateway",
    "port": 8080,
    "cache_ttl": "3600s",
    "timeout": "30s",
    "endpoints": [
        {
            "endpoint": "/gwresources/claims",
            "output_encoding": "no-op",
            "backend": [
                {
                    "host": "http://resource:8080",
                    "encoding": "no-op",
                    "url_pattern": "/resources/claims"
                }
            ],
            "extra_config": {
                "github.com/devopsfaith/krakend-jose/validator": {
                    "alg": "RS512",
                    "audience": ["http://kubernetes.docker.internal/auth/signinpop/main"],
                    "issuer": "http://kubernetes.docker.internal:8001/cas/oidc",
                    "jwk-url": "http://sso:8080/cas/oidc/jwks",
                    "disable_jwk_security": true                
                }
            }        
        },
        {
            "endpoint": "/gwresources/something",
            "headers_to_pass":[ "*" ],
            "backend": [
                {
                    "host": "http://resource:8080",
                    "url_pattern": "/resources/something"
                }
            ],
            "extra_config": {
                "github.com/devopsfaith/krakend-jose/validator": {
                    "alg": "RS512",
                    "audience": ["http://kubernetes.docker.internal/auth/signinpop/main"],
                    "issuer": "http://kubernetes.docker.internal:8001/cas/oidc",
                    "scopes": ["openid"],
                    "scopes_key": "scope",
                    "scopes_matcher": "any",
                    "jwk-url": "http://sso:8080/cas/oidc/jwks",
                    "disable_jwk_security": true                
                }
            }        
        },
        {
            "endpoint": "/gwresources/jwks",
            "backend": [
                {
                    "host": "http://sso:8080",
                    "url_pattern": "/cas/oidc/jwks"
                }
            ]        
        } 
    ]
}