{
    "version": 2,
    "name": "UMU API Gateway",
    "port": 8080,
    "cache_ttl": "3600s",
    "timeout": "30s",
    "endpoints": [
        {
            "endpoint": "/resources/hello",
            "headers_to_pass":[ "*" ],
            "output_encoding": "no-op",
            "backend": [
                {
                    "host": "http://resource:8080",
                    "encoding": "no-op",
                    "url_pattern": "/resources/hello"
                }
            ],
            "extra_config": {
                "github.com/devopsfaith/krakend-jose/validator": {
                    "alg": "RS512",
                    "vue-audience": ["http://micampus.umes/auth/signinpop/main"],
                    "app-audience": ["http://pkce.umes/login/oauth2/code/casum"],
                    "issuer": "https://f146-31-222-83-252.ngrok.io/cas/oidc",
                    "scopes": ["openid"],
                    "scopes_key": "scopes",
                    "scopes_matcher": "any",
                    "jwk-url": "http://entrada:8080/cas/oidc/jwks",
                    "disable_jwk_security": true                
                }
            }        
        },
        {
            "endpoint": "/resources/bearer",
            "headers_to_pass":[ "*" ],
            "output_encoding": "no-op",
            "backend": [
                {
                    "host": "http://resource:8080",
                    "url_pattern": "/resources/bearer",
                    "encoding": "no-op"
                }
            ],
            "extra_config": {
                "github.com/devopsfaith/krakend-jose/validator": {
                    "alg": "RS512",
                    "vue-audience": ["http://micampus.umes/auth/signinpop/main"],
                    "app-audience": ["http://pkce.umes/login/oauth2/code/casum"],
                    "issuer": "https://f146-31-222-83-252.ngrok.io/cas/oidc",
                    "scopes": ["openid"],
                    "scopes_key": "scopes",
                    "scopes_matcher": "any",
                    "jwk-url": "http://entrada:8080/cas/oidc/jwks",
                    "disable_jwk_security": true                
                }
            }        
        }
   ]
}